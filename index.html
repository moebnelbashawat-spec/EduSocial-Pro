<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EduSocial | Pro Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary: #00ff88;
            --primary-glow: rgba(0, 255, 136, 0.5);
            --bg-dark: #050810;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body.blue-theme {
            --primary: #00d9ff;
            --primary-glow: rgba(0, 217, 255, 0.5);
            --bg-dark: #040a1a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none; transition: all 0.3s ease; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-dark); color: #fff; min-height: 100vh; overflow-x: hidden; }

        #bg-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden; }
        .floating-icon { position: absolute; color: var(--primary); opacity: 0.15; animation: float 20s infinite linear; }
        @keyframes float { from { transform: translateY(110vh) rotate(0deg); } to { transform: translateY(-10vh) rotate(360deg); } }

        .taskbar { position: fixed; top: 15px; left: 50%; transform: translateX(-50%); width: 95%; max-width: 1200px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 20px; padding: 10px 20px; display: none; justify-content: space-between; align-items: center; z-index: 1000; }
        
        .greeting-bar { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); background: var(--glass); border: 1px solid var(--primary); padding: 5px 20px; border-radius: 50px; display: none; z-index: 999; animation: pulseGlow 2s infinite; }
        @keyframes pulseGlow { 0% { box-shadow: 0 0 5px var(--primary-glow); } 50% { box-shadow: 0 0 20px var(--primary-glow); } 100% { box-shadow: 0 0 5px var(--primary-glow); } }

        .auth-screen { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .welcome-text { font-size: 1.2rem; font-weight: 900; margin-bottom: 25px; text-align: center; animation: textGlow 4s infinite alternate; }
        @keyframes textGlow { 0% { color: #00ff88; text-shadow: 0 0 10px #00ff88; } 50% { color: #00d9ff; text-shadow: 0 0 20px #00d9ff; } 100% { color: #ff00ff; text-shadow: 0 0 10px #ff00ff; } }
        .glass-box { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid var(--primary); border-radius: 40px; padding: 40px; width: 100%; max-width: 420px; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
        .input-premium { width: 100%; padding: 15px; margin-bottom: 15px; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); border-radius: 15px; color: #fff; text-align: center; outline: none; }
        .btn-kick { width: 100%; padding: 16px; border-radius: 18px; border: none; background: var(--primary); color: #000; font-weight: 900; font-size: 1.2rem; cursor: pointer; box-shadow: 0 10px 25px var(--primary-glow); }

        .platform { display: none; padding: 140px 20px 60px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1200px; margin: auto; }
        .card { background: rgba(255, 255, 255, 0.02); border-radius: 35px; border: 1px solid var(--glass-border); padding: 30px; text-align: center; }
        .icon-modern { width: 85px; height: 85px; background: rgba(255,255,255,0.05); border-radius: 25px; display: grid; place-items: center; margin: 0 auto 20px; font-size: 2.5rem; color: var(--primary); border-bottom: 3px solid var(--primary); }

        #media-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10002; padding: 20px; }
        #media-modal img { max-width: 100%; max-height: 80vh; border-radius: 15px; box-shadow: 0 0 30px var(--primary); }

        #profile-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); display: none; align-items: center; justify-content: center; z-index: 10001; }
        
        .action-btn { display: flex; align-items: center; justify-content: space-between; padding: 14px 22px; margin-top: 12px; border-radius: 15px; cursor: pointer; font-size: 0.95rem; font-weight: 800; border-left: 5px solid transparent; }
        .b-file { background: rgba(255, 193, 7, 0.1); color: #ffc107; border-left-color: #ffc107; }
        .b-video { background: rgba(233, 30, 99, 0.1); color: #e91e63; border-left-color: #e91e63; }
        
        .dev-box { background: rgba(255,255,255,0.03); border: 1.5px solid var(--primary); border-radius: 25px; padding: 20px; width: 280px; text-align: center; margin: 10px; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="bg-container"></div>

    <div class="taskbar" id="top-nav">
        <div style="display: flex; align-items: center; gap: 15px;">
            <div id="nav-avatar" onclick="toggleProfile()" style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary); overflow: hidden; cursor:pointer;">
                <img id="nav-p-img" src="https://via.placeholder.com/150" style="width:100%; height:100%;">
            </div>
            <a href="https://chat.whatsapp.com/KSTKkSxaK76HDxPuPSYiqr" target="_blank" style="color:white;"><i class="fab fa-whatsapp" style="color:#25d366;"></i></a>
        </div>
        <div style="display: flex; gap: 20px; align-items: center;">
            <i class="fas fa-palette" onclick="toggleTheme()" style="cursor:pointer; color: var(--primary);"></i>
            <i class="fas fa-power-off" onclick="logout()" style="cursor:pointer; color: #ff4444;"></i>
        </div>
    </div>

    <div class="greeting-bar" id="greet-bar">
        <span id="user-greet-name"></span>
    </div>

    <section class="auth-screen" id="auth-page">
        <div class="welcome-text">College of Social Work</div>
        <div class="glass-box" id="login-ui">
            <h1 style="color: var(--primary); font-size: 2.8rem;">Edu social ♥️</h1>
            <input type="text" id="l_u" class="input-premium" placeholder="اسم المستخدم">
            <input type="password" id="l_p" class="input-premium" placeholder="كلمة المرور">
            <button class="btn-kick" onclick="login()">دخول</button>
            <p onclick="viewReg(true)" style="margin-top:20px; color:var(--primary); cursor:pointer;">إنشاء حساب</p>
        </div>

        <div class="glass-box" id="reg-ui" style="display: none;">
            <h1 style="color: var(--primary); font-size: 2.2rem;">حساب جديد</h1>
            <input type="text" id="r_n" class="input-premium" placeholder="الاسم بالكامل">
            <input type="text" id="r_u" class="input-premium" placeholder="اسم المستخدم">
            <input type="password" id="r_p" class="input-premium" placeholder="كلمة المرور">
            <button class="btn-kick" onclick="register()">تسجيل ✅</button>
            <p onclick="viewReg(false)" style="margin-top:20px; color:var(--primary); cursor:pointer;">العودة</p>
        </div>
    </section>

    <section class="platform" id="platform">
        <div class="grid" id="subjects-grid"></div>
    </section>

    <div id="media-modal">
        <h3 id="media-title" style="margin-bottom: 15px; color: var(--primary);"></h3>
        <img id="media-img" src="" alt="ملف المادة">
        <button class="btn-kick" onclick="closeMedia()" style="margin-top:20px; max-width: 200px;">إغلاق</button>
    </div>

    <div id="profile-modal">
        <div class="glass-box">
            <h2 id="p-name-display" style="color:var(--primary);"></h2>
            <p id="p-user-display" style="opacity:0.6; margin-bottom:20px;"></p>
            <button class="btn-kick" onclick="toggleProfile()">إغلاق</button>
        </div>
    </div>

    <script>
        // الروابط المحدثة
        const SHARIA_IMAGE = "https://i.ibb.co/XkyYshNf/105032.jpg"; 
        const PLANNING_DRIVE = "https://drive.google.com/file/d/1THN6oIqYh-Qoz_dId1yDwnE6edUaJpjX/view?usp=drivesdk";

        const icons = ['fa-users', 'fa-hand-holding-heart', 'fa-child', 'fa-heart'];
        const bg = document.getElementById('bg-container');
        for(let i=0; i<20; i++) {
            let icon = document.createElement('i'); icon.className = `fas ${icons[Math.floor(Math.random()*icons.length)]} floating-icon`;
            icon.style.left = Math.random() * 100 + 'vw'; icon.style.animationDelay = Math.random() * 10 + 's';
            bg.appendChild(icon);
        }

        function viewReg(s) { document.getElementById('login-ui').style.display = s ? 'none' : 'block'; document.getElementById('reg-ui').style.display = s ? 'block' : 'none'; }
        
        function register() {
            const n = document.getElementById('r_n').value, u = document.getElementById('r_u').value, p = document.getElementById('r_p').value;
            if(!n || !u || !p) return alert("اكمل البيانات");
            let db = JSON.parse(localStorage.getItem('edu_v4') || "[]");
            db.push({ name: n, user: u, pass: btoa(p), photo: null });
            localStorage.setItem('edu_v4', JSON.stringify(db));
            alert("تم بنجاح!"); viewReg(false);
        }

        function login() {
            const u = document.getElementById('l_u').value, p = document.getElementById('l_p').value;
            let db = JSON.parse(localStorage.getItem('edu_v4') || "[]");
            const user = db.find(x => x.user === u && x.pass === btoa(p));
            if(user) { localStorage.setItem('current_u', u); loadPlatform(); }
            else alert("بيانات خاطئة!");
        }

        function loadPlatform() {
            const u = localStorage.getItem('current_u');
            const db = JSON.parse(localStorage.getItem('edu_v4'));
            const user = db.find(x => x.user === u);
            
            document.getElementById('auth-page').style.display = 'none';
            document.getElementById('top-nav').style.display = 'flex';
            document.getElementById('greet-bar').style.display = 'block';
            document.getElementById('platform').style.display = 'block';
            document.getElementById('user-greet-name').innerText = `أهلاً د. ${user.name} ✨`;

            const subs = [
                {n:"التخطيط الاجتماعي", i:"fa-chart-column", file: PLANNING_DRIVE},
                {n:"الشريعة الإسلامية", i:"fa-kaaba", file: SHARIA_IMAGE}, 
                {n:"العمل مع الأفراد", i:"fa-user-tie", file: null},
                {n:"العمل مع المجتمعات", i:"fa-city", file: null},
                {n:"حاسب آلي", i:"fa-laptop-code", file: null},
                {n:"زيارات ميدانية", i:"fa-bus", file: null}
            ];

            document.getElementById('subjects-grid').innerHTML = subs.map(s => `
                <div class="card">
                    <div class="icon-modern"><i class="fas ${s.i}"></i></div>
                    <h3>${s.n}</h3>
                    <div style="margin-top:20px;">
                        <div class="action-btn b-file" onclick="handleFileClick('${s.n}', '${s.file}')">
                            <span>الملف المعتمد</span> <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="action-btn b-video" onclick="alert('سيتوفر الشرح قريباً')">
                            <span>الشرح المرئي</span> <i class="fas fa-play-circle"></i>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function handleFileClick(title, url) {
            if(!url || url === "null") return alert("الملف غير متوفر حالياً لهذه المادة");
            
            // إذا كان الرابط من جوجل درايف يفتح في نافذة جديدة
            if(url.includes("drive.google.com")) {
                window.open(url, '_blank');
            } else {
                // إذا كان صورة يفتح في المودال الداخلي
                document.getElementById('media-title').innerText = title;
                document.getElementById('media-img').src = url;
                document.getElementById('media-modal').style.display = 'flex';
            }
        }

        function closeMedia() { document.getElementById('media-modal').style.display = 'none'; }
        function toggleProfile() { 
            const m = document.getElementById('profile-modal');
            m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
        }
        function logout() { localStorage.removeItem('current_u'); location.reload(); }
        function toggleTheme() { document.body.classList.toggle('blue-theme'); }
        window.onload = () => { if(localStorage.getItem('current_u')) loadPlatform(); };
    </script>
</body>
</html>
